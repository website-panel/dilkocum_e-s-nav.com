<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elektronik SÄ±nav UygulamasÄ±</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0d3d6e; --primary-light: #1a5a96;
            --danger-color: #d9534f; --danger-dark: #c9302c;
            --success-color: #28a745; --success-dark: #1e7e34;
            --info-color: #5bc0de; --info-dark: #31b0d5;
            --secondary-color: #6c757d; --secondary-dark: #5a6268;
            --background-color: #f4f7fa; --card-background: #ffffff;
            --text-color: #333; --text-light: #555;
            --border-color: #e0e0e0; --shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--background-color); color: var(--text-color);
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
            -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
        }
        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 20px 15px; }
        .top-header { background-color: var(--primary-color); color: white; padding: 15px 30px; box-shadow: var(--shadow); }
        .top-header h1 { font-size: 1.3em; margin: 0; font-weight: 600; text-align: center; }
        #sinav-arayuzu .status-bar { background-color: var(--card-background); border-bottom: 1px solid var(--border-color); padding: 12px 30px; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; font-size: 0.9em; gap: 20px; }
        .user-info, .time-info { display: flex; align-items: center; gap: 15px; }
        .user-info .icon svg { width: 42px; height: 42px; fill: var(--text-light); }
        .user-details strong { font-weight: 600; }
        .time-info .time-label { color: var(--text-light); font-weight: 500; }
        .time-info .time-box { font-weight: 700; font-size: 1.5em; color: var(--danger-color); font-family: 'Courier New', Courier, monospace; }
        .status-controls button { background-color: var(--danger-color); color: white; border: none; border-radius: 8px; padding: 10px 18px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: background-color 0.2s; }
        .status-controls button:hover { background-color: var(--danger-dark); }
        #sonuclara-don-btn { background-color: var(--info-color); }
        #sonuclara-don-btn:hover { background-color: var(--info-dark); }
        .status-controls button:disabled { background-color: #ccc; cursor: not-allowed; }
        .exam-body { display: flex; flex-direction: column; gap: 20px; }
        .question-panel { flex: 3; background-color: var(--card-background); border-radius: 12px; box-shadow: var(--shadow); padding: 25px; display: flex; flex-direction: column; }
        .question-main { display: flex; gap: 20px; align-items: flex-start; }
        .question-side-nav { display: flex; flex-direction: column; align-items: center; gap: 15px; margin-top: 50px; }
        .nav-button { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--border-color); background-color: #fff; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 1.8em; color: var(--text-light); transition: all 0.2s; }
        .nav-button:hover:not(.disabled) { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .nav-button.disabled { cursor: not-allowed; background-color: #f9f9f9; color: #ccc; border-color: #eee; }
        .question-content { flex: 1; }
        .question-number { font-size: 1.5em; font-weight: 600; color: var(--primary-color); margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px;}
        .instruction-box { background-color: #eef5ff; border: 1px solid #d0e8fc; padding: 15px; border-radius: 8px; margin-bottom: 25px; font-size: 0.95em; color: #31708f; }
        .question-text { font-size: 1.2em; line-height: 1.6; margin-bottom: 30px; font-weight: 500; }
        .options-list { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 15px; }
        .options-list li { display: flex; align-items: flex-start; gap: 15px; font-size: 1.05em; padding: 10px; border-radius: 8px; border: 2px solid transparent; cursor: pointer; transition: all 0.2s; }
        .options-list li.strikethrough span { text-decoration: line-through; color: #999; }
        .options-list li:hover { background-color: #f8f9fa; }
        .options-list input[type="radio"] { display: none; }
        .options-list label { width: 36px; height: 36px; border-radius: 50%; border: 2px solid #ccc; display: flex; justify-content: center; align-items: center; font-weight: 600; cursor: pointer; transition: all 0.2s; flex-shrink: 0; margin-top: 3px; }
        .options-list li.selected { border-color: var(--primary-light); background-color: #f7faff; }
        .options-list li.selected label { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .right-panel-exam { flex: 1; background-color: var(--card-background); padding: 25px; border-radius: 12px; box-shadow: var(--shadow); position: sticky; top: 20px; max-height: 90vh; overflow-y: auto; }
        .right-panel-exam h3 { text-align: center; margin-top: 0; font-weight: 600; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); margin-bottom: 15px; }
        .optik-grup { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; padding: 5px; }
        .optik-grup .soru-no { font-weight: bold; }
        .optik-secenekler { display: flex; gap: 5px; }
        .optik-secenekler input[type="radio"] { display: none; }
        .optik-secenekler label { display: inline-block; width: 30px; height: 30px; border-radius: 50%; border: 1px solid #ccc; text-align: center; line-height: 28px; cursor: pointer; font-size: 14px; transition: background-color 0.3s; }
        .optik-secenekler input[type="radio"]:checked + label { background-color: var(--primary-color); color: white; border-color: var(--primary-color);}
        .optik-secenekler label.dogru { background-color: var(--success-color) !important; color: white !important; border-color: var(--success-color) !important; }
        .optik-secenekler label.yanlis { background-color: var(--danger-color) !important; color: white !important; border-color: var(--danger-color) !important; }
        #sonuc-arayuzu { display: none; }
        #sonuc-arayuzu .main-content { display: flex; flex-direction: column; gap: 20px; }
        #sonuc-arayuzu .panel { background-color: var(--card-background); border-radius: 12px; box-shadow: var(--shadow); padding: 25px; border: 1px solid var(--border-color); }
        .summary-box h2, .right-panel-results h3 { margin-top: 0; margin-bottom: 20px; font-weight: 600; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
        .exam-date { font-size: 0.9em; color: var(--text-light); text-align: center; margin-bottom: 20px; padding-top: 10px;}
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; }
        .stat-item { padding: 20px 15px; border-radius: 8px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; }
        .stat-item .label { font-size: 0.9em; font-weight: 500; text-transform: uppercase; }
        .stat-item .value { font-size: 2.2em; font-weight: 700; line-height: 1; }
        .stat-item.dogru { background-color: #eaf6ec; color: var(--success-dark); }
        .stat-item.yanlis { background-color: #fdeded; color: var(--danger-dark); }
        .stat-item.bos { background-color: #f1f3f5; color: #555; }
        .stat-item.net { background-color: #eef5ff; color: var(--primary-light); }
        .action-buttons { display: flex; flex-direction: column; gap: 10px; }
        .action-buttons button { width: 100%; padding: 12px; font-size: 1em; font-weight: 600; cursor: pointer; color: white; border: none; border-radius: 8px; transition: background-color 0.2s, transform 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .action-buttons button:hover { transform: translateY(-2px); }
        #yeni-sinav-btn { background-color: var(--primary-color); }
        #yeni-sinav-btn:hover { background-color: var(--primary-light); }
        #sorulari-incele-btn { background-color: var(--info-color); }
        #sorulari-incele-btn:hover { background-color: var(--info-dark); }
        #sistemden-cikis-btn { background-color: var(--secondary-color); }
        #sistemden-cikis-btn:hover { background-color: var(--secondary-dark); }
        #gecmis-listesi { margin-top: 20px; max-height: 300px; overflow-y: auto; padding-right: 10px;}
        .history-item { background-color: var(--background-color); border: 1px solid var(--border-color); padding: 15px; margin-bottom: 10px; border-radius: 8px; font-size: 0.95em; transition: box-shadow 0.2s; }
        #optik-form-sonuc { max-height: 550px; overflow-y: auto; padding-right: 15px; display: flex; flex-direction: column; gap: 12px; }
        .cevap-anahtari-satir { display: flex; align-items: center; background-color: #f8f9fa; padding: 10px 15px; border-radius: 8px; border: 1px solid var(--border-color); transition: box-shadow 0.2s, background-color 0.2s; cursor: pointer; }
        .cevap-anahtari-satir:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.05); background-color: #f1f3f5; }
        .cevap-soru-no { font-weight: 600; color: var(--primary-color); width: 80px; }
        .cevap-secenekler { display: flex; gap: 8px; flex-grow: 1; }
        .cevap-secenek { width: 38px; height: 38px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: 500; border: 2px solid transparent; background-color: #fff; position: relative; }
        .cevap-secenek.dogru-cevap { border-color: var(--success-color); color: var(--success-dark); }
        .cevap-secenek.dogru-cevap::after { content: 'âœ“'; position: absolute; bottom: -8px; right: -8px; background-color: var(--success-color); color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 14px; line-height: 20px; text-align: center; }
        .cevap-secenek.ogrenci-cevabi { background-color: #eef5ff; box-shadow: 0 0 0 3px var(--primary-light); }
        .cevap-secenek.yanlis-cevap { background-color: #fdeded; box-shadow: 0 0 0 3px var(--danger-color); }
        .cevap-secenek.yanlis-cevap::after { content: 'âœ—'; position: absolute; bottom: -8px; right: -8px; background-color: var(--danger-color); color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 14px; line-height: 20px; text-align: center; }
        .cevap-durum { font-weight: 600; font-size: 0.85em; padding: 5px 12px; border-radius: 15px; color: white; text-align: center; min-width: 80px; }
        .cevap-durum.durum-dogru { background-color: var(--success-color); }
        .cevap-durum.durum-yanlis { background-color: var(--danger-color); }
        .cevap-durum.durum-bos { background-color: var(--text-light); color: #fff; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: 1000; display: flex; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: all 0.3s ease-in-out; }
        .modal-overlay.show { opacity: 1; visibility: visible; }
        .modal-content { background: white; padding: 30px 40px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: center; transform: translateY(-50px); transition: all 0.3s ease-in-out; max-width: 90%; width: 600px; }
        .modal-overlay.show .modal-content { transform: translateY(0); }
        .modal-content p { font-size: 1.2em; margin: 0 0 20px 0; color: #333; }
        .modal-buttons { display: flex; gap: 15px; justify-content: center;}
        .modal-buttons button { background-color: var(--primary-light); color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 1em; cursor: pointer; margin-top: 10px; transition: background-color 0.2s; }
        .modal-buttons button:hover { background-color: var(--primary-color); }
        .modal-buttons button.cancel { background-color: #6c757d; }
        .modal-buttons button.cancel:hover { background-color: #5a6268;}
        .modal-buttons button.confirm { background-color: var(--danger-color); }
        .modal-buttons button.confirm:hover { background-color: var(--danger-dark);}
        .countdown-timer { font-size: 3em; font-weight: 700; color: var(--primary-color); margin: 15px 0; }
        
        #soru-detay-popup .modal-content { 
            text-align: left; 
            max-width: 650px;
            width: 90%;
            display: flex;
            flex-direction: column;
            max-height: 85vh;
            padding: 0;
        }
        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        .modal-body {
            padding: 25px 30px;
            overflow-y: auto;
            flex-grow: 1;
        }
        .modal-footer {
            padding: 15px 30px;
            background-color: #f9f9f9;
            border-top: 1px solid var(--border-color);
            text-align: right;
            flex-shrink: 0;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        #soru-detay-popup h3 { 
            margin: 0; 
            font-weight: 600; 
            color: var(--primary-color);
            padding: 0;
            border: none;
        }
        .soru-detay-metin { 
            font-size: 1.1em; 
            line-height: 1.7;
            margin-bottom: 25px; 
            background-color: var(--background-color); 
            padding: 20px; 
            border-radius: 8px;
            font-weight: 600;
            color: var(--text-color);
        }
        .soru-detay-secenekler { 
            list-style: none; 
            padding: 0; 
            display: flex; 
            flex-direction: column; 
            gap: 10px;
        }
        .soru-detay-secenekler-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px;
            border: 2px solid var(--border-color); 
            border-radius: 8px; 
        }
        .soru-detay-secenekler-item .harf { 
            font-weight: 700; 
            color: var(--primary-color); 
            margin-right: 15px;
        }
        .soru-detay-secenekler-item.correct-answer { background-color: #eaf6ec; border-color: var(--success-color); font-weight: 500; }
        .soru-detay-secenekler-item.incorrect-answer { background-color: #fdeded; border-color: var(--danger-color); }
        .status-icon { font-size: 1.4em; font-weight: 700; }
        .status-icon.icon-correct { color: var(--success-dark); }
        .status-icon.icon-incorrect { color: var(--danger-dark); }
        .modal-body::-webkit-scrollbar { width: 8px; }
        .modal-body::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .modal-body::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }
        .modal-body::-webkit-scrollbar-thumb:hover { background: #aaa; }
        
        @media (min-width: 992px) { .exam-body, #sonuc-arayuzu .main-content { flex-direction: row; align-items: flex-start; } #sonuc-arayuzu .left-panel { flex: 1; position: sticky; top: 20px; } #sonuc-arayuzu .right-panel-results { flex: 2; } }
        
        /* YENÄ°: Profesyonel mobil soru gÃ¶rÃ¼nÃ¼mÃ¼ iÃ§in tasarÄ±m harikasÄ± stilleri */
        @media (max-width: 768px) { 
            .cevap-anahtari-satir { flex-direction: column; align-items: flex-start; gap: 10px; } 
            .cevap-durum { margin-left: auto; }
            .exam-body { flex-direction: column-reverse; } /* Optik formu Ã¼ste alÄ±r */
            .right-panel-exam { position: static; max-height: 250px; } /* Optik form yÃ¼ksekliÄŸini sÄ±nÄ±rlar */
            .question-panel { padding: 20px 15px; }

            .question-main {
                flex-wrap: wrap; /* ButonlarÄ±n alta dÃ¼ÅŸmesini saÄŸlar */
                gap: 25px; /* Butonlar ve iÃ§erik arasÄ± boÅŸluk */
                justify-content: space-between;
            }

            .question-content {
                flex-basis: 100%; /* Soru iÃ§eriÄŸi tam geniÅŸliÄŸi kaplasÄ±n */
                order: 1; /* Soru iÃ§eriÄŸi en Ã¼ste gelsin */
            }
            
            .question-text {
                font-size: 1.1em; /* Mobil iÃ§in daha okunaklÄ± yazÄ± boyutu */
                line-height: 1.7; /* Uzun metinlerde daha iyi okunabilirlik iÃ§in satÄ±r aralÄ±ÄŸÄ± */
            }
            
            .question-side-nav {
                flex-basis: 48%; /* ButonlarÄ±n yan yana sÄ±ÄŸmasÄ± iÃ§in geniÅŸlik */
                order: 2; /* Butonlar soru iÃ§eriÄŸinin altÄ±na gelsin */
                margin-top: 0; /* Ãœstteki boÅŸluÄŸu sÄ±fÄ±rla */
            }
            
            .nav-button {
                width: 100%; /* KapsayÄ±cÄ±sÄ±nÄ±n tamamÄ±nÄ± doldur */
                height: auto;
                padding: 12px 15px; /* Daha dokunulabilir butonlar */
                border-radius: 8px;
                font-size: 0; /* Orijinal ok metnini gizle */
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }
            
            /* ButonlarÄ±n iÃ§indeki oklarÄ± gizleyip yerine metin ekliyoruz */
            .nav-button#prev-btn::before {
                content: 'â† Ã–nceki';
                font-size: 1rem; /* Yeni metnin boyutunu ayarla */
            }

            .nav-button#next-btn::after {
                content: 'Sonraki â†’';
                font-size: 1rem; /* Yeni metnin boyutunu ayarla */
            }
        }
    </style>
</head>
<body>
    <div id="app-container">
        <!-- SÄ±nav ArayÃ¼zÃ¼ -->
        <div id="sinav-arayuzu">
            <header class="top-header"><h1>Elektronik SÄ±nav UygulamasÄ±</h1></header>
            <div class="status-bar">
                <div class="user-info">
                    <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"/></svg></div>
                    <div class="user-details"><strong class="kullanici-ad-soyad"></strong></div>
                </div>
                <div class="time-info"><span class="time-label">Kalan SÃ¼re:</span><span id="main-exam-timer" class="time-box">--:--:--</span><span class="time-label">Saat:</span><span id="exam-current-time" class="time-box"></span></div>
                <div class="status-controls">
                    <button id="sinav-sonlandir-btn">ğŸ›‘ SÄ±navÄ± SonlandÄ±r</button>
                    <button id="sonuclara-don-btn" style="display: none;">ğŸ“Š SonuÃ§lara DÃ¶n</button> 
                </div>
            </div>
            <div class="container">
                <div class="exam-body"><div class="question-panel"><div class="question-main"><div class="question-side-nav"><button id="prev-btn" class="nav-button">&#x2190;</button></div><div class="question-content" id="soru-icerik"></div><div class="question-side-nav"><button id="next-btn" class="nav-button">&#x2192;</button></div></div></div><aside class="right-panel-exam"><h3>Optik Form</h3><div id="optik-form-icerik"></div></aside></div>
            </div>
        </div>
        <!-- SonuÃ§ ArayÃ¼zÃ¼ -->
        <div id="sonuc-arayuzu">
            <header class="top-header"><h1>SÄ±nav SonuÃ§ Raporu: <span id="sonuc-kullanici-ad-soyad"></span></h1></header>
            <div class="container"><div class="main-content"><aside class="left-panel"><div class="summary-box panel"><h2>Son SÄ±nav Analizi</h2><div class="exam-date"><strong>SÄ±nav Tarihi:</strong> <span id="sinav-tarihi"></span></div><div class="stats"><div class="stat-item dogru"><div class="label">DOÄRU</div><div id="dogru-sayisi" class="value">0</div></div><div class="stat-item yanlis"><div class="label">YANLIÅ</div><div id="yanlis-sayisi" class="value">0</div></div><div class="stat-item bos"><div class="label">BOÅ</div><div id="bos-sayisi" class="value">0</div></div><div class="stat-item net"><div class="label">NET</div><div id="net-sayisi" class="value">0.00</div></div></div></div><div class="action-buttons panel"><li>
  <a href="sinava_basla.html">
    <button id="yeni-sinav-btn">Yeni SÄ±nava BaÅŸla</button>
  </a>
</li><button id="sorulari-incele-btn">SorularÄ± GÃ¶zden GeÃ§ir</button><button id="sistemden-cikis-btn">Sistemden Ã‡Ä±kÄ±ÅŸ Yap</button><div id="gecmis-listesi"></div></div></aside><div class="right-panel-results panel"><h3>Cevap AnahtarÄ±</h3><div id="optik-form-sonuc"></div></div></div></div>
        </div>
        <!-- Modal Pencereleri -->
        <div id="onay-popup" class="modal-overlay"><div class="modal-content"><h2 style="margin-top:0;">Emin misiniz?</h2><p id="onay-mesaji"></p><div class="modal-buttons"><button id="onay-iptal-btn" class="cancel">Ä°ptal</button><button id="onay-devam-btn" class="confirm">Evet, SonlandÄ±r</button></div></div></div>
        <div id="bilgi-popup" class="modal-overlay"><div class="modal-content"><h2 style="margin-top:0;">GEÃ‡MÄ°Å OLSUN ğŸ˜Š</h2><p id="bilgi-mesaji"></p><div class="modal-buttons"><button id="bilgi-kapat-btn">Tamam</button></div></div></div>
        <div id="sayac-popup" class="modal-overlay"><div class="modal-content"><h2 style="margin-top:0;">SonuÃ§lar HazÄ±rlanÄ±yor...</h2><p>LÃ¼tfen bekleyin, sonuÃ§larÄ±nÄ±z saniyeler iÃ§inde gÃ¶rÃ¼ntÃ¼lenecek.</p><div id="gerisayim-sayaci" class="countdown-timer">10</div></div></div>
        <div id="soru-detay-popup" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="soru-detay-baslik"></h3>
                </div>
                <div class="modal-body">
                    <div id="soru-detay-metin" class="soru-detay-metin"></div>
                    <ul id="soru-detay-secenekler" class="soru-detay-secenekler"></ul>
                </div>
                <div class="modal-footer">
                    <button id="soru-detay-kapat-btn" class="modal-buttons button">Kapat</button>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyAvaEaHtTwcuCDBIggJGd4w_nzJQM5UlmY", authDomain: "teacher-adminpanel.firebaseapp.com", projectId: "teacher-adminpanel", storageBucket: "teacher-adminpanel.appspot.com", messagingSenderId: "901735644134", appId: "1:901735644134:web:a6aa575a0754de1333f427", measurementId: "G-68BWZJYCK9" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const ui = { sinavArayuzu: document.getElementById('sinav-arayuzu'), sonucArayuzu: document.getElementById('sonuc-arayuzu'), soruIcerik: document.getElementById('soru-icerik'), optikFormIcerik: document.getElementById('optik-form-icerik'), sonlandirBtn: document.getElementById('sinav-sonlandir-btn'), prevBtn: document.getElementById('prev-btn'), nextBtn: document.getElementById('next-btn'), onayPopup: document.getElementById('onay-popup'), bilgiPopup: document.getElementById('bilgi-popup'), sayacPopup: document.getElementById('sayac-popup'), soruDetayPopup: document.getElementById('soru-detay-popup'), kullaniciAdSoyad: document.querySelector('.kullanici-ad-soyad'), appContainer: document.getElementById('app-container'), sonuclaraDonBtn: document.getElementById('sonuclara-don-btn') };
        const SORU_HAVUZU = [ 
{
        "metin": "Exposure therapy is a form of cognitive-behavioural therapy in which patients with phobias are exposed to feared objects or situations while accompanied by the therapist.",
        "secenekler": [
            "Maruz bÄ±rakma terapisi, bir biliÅŸsel-davranÄ±ÅŸsal tedavi tÃ¼rÃ¼dÃ¼r ve fobileri olan hastalar bu tedavide bir terapist eÅŸliÄŸinde korkulan nesnelere veya durumlara maruz bÄ±rakÄ±lÄ±r.",
            "Bir Ã§eÅŸit biliÅŸsel-davranÄ±ÅŸsal tedavi tÃ¼rÃ¼ olan maruz bÄ±rakma terapisinde, fobileri olan hastalar korkulan nesne veya durumlara terapistleri tarafÄ±ndan maruz bÄ±rakÄ±lÄ±r.",
            "Maruz bÄ±rakma terapisi, fobileri olan hastalarÄ±n, korkulan nesnelere veya durumlara terapist eÅŸliÄŸinde maruz bÄ±rakÄ±ldÄ±ÄŸÄ± bir biliÅŸsel-davranÄ±ÅŸsal tedavi tÃ¼rÃ¼dÃ¼r.",
            "Fobileri olan hastalar, bir tÃ¼r biliÅŸsel-davranÄ±ÅŸsal tedavi olan maruz bÄ±rakma terapisi boyunca korktuklarÄ± nesnelere veya durumlara bir terapist eÅŸliÄŸinde maruz bÄ±rakÄ±lÄ±r.",
            "Fobileri olan hastalarÄ±n korktuklarÄ± nesnelere veya durumlara maruz bÄ±rakÄ±ldÄ±ÄŸÄ± biliÅŸsel-davranÄ±ÅŸsal bir tedavi tÃ¼rÃ¼ olan maruz bÄ±rakma terapisi, bir terapist eÅŸliÄŸinde uygulanÄ±r."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Those with a chronic condition should definitely avoid detox diets, as they can interfere with medications and may cause dehydration, mineral deficiencies, or muscle loss.",
        "secenekler": [
            "Kronik rahatsÄ±zlÄ±ÄŸÄ± olanlar tarafÄ±ndan kesinlikle kaÃ§Ä±nÄ±lmasÄ± gereken detoks diyetleri, alÄ±nan ilaÃ§larla etkileÅŸime girerek su kaybÄ±, mineral eksikliÄŸi ya da kas kaybÄ±na yol aÃ§abilmektedir.",
            "Kronik rahatsÄ±zlÄ±ÄŸÄ± olanlar, alÄ±nan ilaÃ§larla etkileÅŸime giren detoks diyetlerinden kesinlikle kaÃ§Ä±nmalÄ±dÄ±r Ã§Ã¼nkÃ¼ bunlar su kaybÄ±, mineral eksikliÄŸi ya da kas kaybÄ±na yol aÃ§abilmektedir.",
            "Kronik rahatsÄ±zlÄ±ÄŸÄ± olanlar, su kaybÄ±, mineral eksikliÄŸi ya da kas kaybÄ±na yol aÃ§an detoks diyetlerinden kesinlikle kaÃ§Ä±nmalÄ±dÄ±r Ã§Ã¼nkÃ¼ bunlar alÄ±nan ilaÃ§larla etkileÅŸime girmektedir.",
            "AlÄ±nan ilaÃ§larla etkileÅŸime giren detoks diyetleri, su kaybÄ±, mineral eksikliÄŸi ya da kas kaybÄ±na yol aÃ§abilir ve kronik rahatsÄ±zlÄ±ÄŸÄ± olanlar bunlardan kesinlikle kaÃ§Ä±nmalÄ±dÄ±r.",
            "Kronik rahatsÄ±zlÄ±ÄŸÄ± olanlar detoks diyetlerinden kesinlikle kaÃ§Ä±nmalÄ±dÄ±r Ã§Ã¼nkÃ¼ bunlar alÄ±nan ilaÃ§larla etkileÅŸime girebilmekte ve su kaybÄ±, mineral eksikliÄŸi ya da kas kaybÄ±na yol aÃ§abilmektedir."
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Africa has been home to many different kinds of animals, though their numbers dramatically declined in the 1900s because large areas of their habitats were taken over for farming.",
        "secenekler": [
            "Afrikaâ€™nÄ±n ev sahipliÄŸi yaptÄ±ÄŸÄ± birÃ§ok farklÄ± hayvan tÃ¼rÃ¼nÃ¼n sayÄ±sÄ±, 1900â€™lerde bu hayvanlarÄ±n yaÅŸam alanlarÄ±nÄ±n bÃ¼yÃ¼k bir kÄ±smÄ± Ã§iftÃ§ilik iÃ§in ele geÃ§irildiÄŸinden oldukÃ§a azalmÄ±ÅŸtÄ±r.",
            "Afrika birÃ§ok farklÄ± hayvan tÃ¼rÃ¼ne ev sahipliÄŸi yapmaktadÄ±r fakat 1900â€™lerde yaÅŸam alanlarÄ±nÄ±n bÃ¼yÃ¼k bir kÄ±smÄ±nÄ±n Ã§iftÃ§ilik iÃ§in kullanÄ±lmasÄ± sayÄ±larÄ±nÄ± oldukÃ§a dÃ¼ÅŸÃ¼rmÃ¼ÅŸtÃ¼r.",
            "Afrika birÃ§ok farklÄ± hayvan tÃ¼rÃ¼ne ev sahipliÄŸi yapmaktadÄ±r ancak yaÅŸam alanlarÄ±nÄ±n bÃ¼yÃ¼k bir bÃ¶lÃ¼mÃ¼ Ã§iftÃ§ilik iÃ§in ele geÃ§irildiÄŸinden sayÄ±larÄ± 1900â€™lerde bÃ¼yÃ¼k Ã¶lÃ§Ã¼de azalmÄ±ÅŸtÄ±r.",
            "BirÃ§ok farklÄ± hayvan tÃ¼rÃ¼ne ev sahipliÄŸi yapan Afrikaâ€™da, yaÅŸam alanlarÄ±nÄ±n bÃ¼yÃ¼k bir bÃ¶lÃ¼mÃ¼ Ã§iftÃ§iliÄŸe ayrÄ±ldÄ±ÄŸÄ±ndan, 1900â€™lerden itibaren hayvanlarÄ±n sayÄ±sÄ±nda bÃ¼yÃ¼k bir dÃ¼ÅŸÃ¼ÅŸ yaÅŸanmÄ±ÅŸtÄ±r.",
            "Afrika birÃ§ok farklÄ± hayvan tÃ¼rÃ¼ne ev sahipliÄŸi yapmÄ±ÅŸtÄ±r ancak 1900â€™lerde yaÅŸam alanlarÄ±nÄ±n bÃ¼yÃ¼k bir kÄ±smÄ± Ã§iftÃ§ilik iÃ§in kullanÄ±lan hayvanlarÄ±n sayÄ±sÄ±nda bÃ¼yÃ¼k bir azalma yaÅŸanmÄ±ÅŸtÄ±r."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Bedenimiz ve duygularÄ±mÄ±z arasÄ±ndaki baÄŸlantÄ±ya dair farkÄ±ndalÄ±ÄŸÄ±n ortaya Ã§Ä±kÄ±ÅŸÄ±, AmerikalÄ± dÃ¼ÅŸÃ¼nÃ¼r William Jamesâ€™in mutlu olduÄŸumuz iÃ§in gÃ¼lmediÄŸimizi, aksine gÃ¼ldÃ¼ÄŸÃ¼mÃ¼z iÃ§in mutlu olduÄŸumuzu ileri sÃ¼rdÃ¼ÄŸÃ¼ 19. yÃ¼zyÄ±la dayanÄ±r.",
        "secenekler": [
            "The emergence of the awareness of a link between our body and our emotions goes back to the 19th century, when the American philosopher William James suggested that we do not laugh because we are happy, rather we are happy because we laugh.",
            "In the 19th century, the American philosopher William James claimed that we do not laugh because we are happy, rather we are happy because we laugh, which led to the emergence of the awareness of a link between our body and our emotions.",
            "The emergence of the awareness of a link between our body and our emotions, which was thanks to the American philosopher William James suggesting that we do not laugh because we are happy, rather we are happy because we laugh, dates back to the 19th centu",
            "The suggestion of the American philosopher William James that we do not laugh because we are happy, rather we are happy because we laugh raised an awareness of a link between our body and our emotions in the 19th century.",
            "The link between our body and our emotions led to the emergence of an awareness dating back to the 19th century, when the American philosopher William James suggested that we do not laugh because we are happy, rather we are happy because we laugh."
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "MÃ– ikinci yÃ¼zyÄ±lÄ±n ilk yarÄ±sÄ±nda gÃ¼cÃ¼nÃ¼n zirvesinde olan Pergamum, BatÄ± Anadoluâ€™nun bÃ¼yÃ¼k bir kÄ±smÄ±nÄ± iÃ§ine alan bir krallÄ±ÄŸÄ±n baÅŸkentiydi.",
        "secenekler": [
            "At the height of its power in the first half of the second century BC, Pergamum was the capital of a kingdom that comprised most of western Anatolia.",
            "Having reached the height of its power by the first half of the second century BC, Pergamum was regarded as the capital of a kingdom comprising most of western Anatolia.",
            "At the height of its power, Pergamum was the capital of a kingdom that included most parts of western Anatolia in the first half of the second century BC.",
            "In the first half of the second century BC, Pergamum was at the peak of its power and was the capital of a kingdom that constituted most of western Anatolia.",
            "Pergamum was the capital of a kingdom which was at its peak and comprised most of western Anatolia in the first half of the second century BC."
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "KiÅŸilik testlerinin, gelecekteki kariyer baÅŸarÄ±sÄ±nÄ± tahmin etmede tavsiye mektuplarÄ±ndan, mÃ¼lakatlardan ve eÄŸitim sertifikalarÄ±ndan daha iyi olduÄŸuna yaygÄ±n olarak inanÄ±lÄ±yor.",
        "secenekler": [
            "It is widely believed that personality tests are better predictors of future career success than letters of recommendation, interviews and educational certificates.",
            "People widely believe that personality tests better predict future career success than letters of recommendation, interviews and educational certificates do.",
            "It is widely believed that personality tests will replace letters of recommendation, interviews and educational certificates in terms of predicting future career success.",
            "People widely believe that personality tests can better predict future career success, so there is no need to use letters of recommendation, interviews and educational certificates any more.",
            "In predicting future career success people widely believe personality tests are better tools than letters of recommendation, interviews and educational certificates."
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "If the brain perceives an alarming or annoying sound, that leads to an increase in stress hormones that help us avoid possible dangers.",
        "secenekler": [
            "Beyin, uyarÄ±cÄ± ya da rahatsÄ±z edici bir ses algÄ±ladÄ±ÄŸÄ±nda bu durum, stres hormonlarÄ±nda bir artÄ±ÅŸa yol aÃ§arak olasÄ± tehlikelerden kaÃ§Ä±nmamÄ±zÄ± saÄŸlar.",
            "Beyin, uyarÄ±cÄ± ya da rahatsÄ±z edici bir ses algÄ±larsa, stres hormonlarÄ±ndaki artÄ±ÅŸ, olasÄ± tehlikelerden kaÃ§Ä±nmamÄ±zÄ± saÄŸlar.",
            "EÄŸer beyin uyarÄ±cÄ± ya da rahatsÄ±z edici bir ses algÄ±larsa bu durum, olasÄ± tehlikelerden kaÃ§Ä±nmamÄ±zÄ± saÄŸlar ve stres hormonlarÄ±nda bir artÄ±ÅŸa sebep olur.",
            "EÄŸer beyin uyarÄ±cÄ± ya da rahatsÄ±z edici bir ses algÄ±larsa bu durum, olasÄ± tehlikelerden kaÃ§Ä±nmamÄ±zÄ± saÄŸlayan stres hormonlarÄ±nda bir artÄ±ÅŸa neden olur.",
            "Beynin uyarÄ±cÄ± ya da rahatsÄ±z edici bir ses algÄ±lamasÄ±, olasÄ± tehlikelerden kaÃ§Ä±nmamÄ±zÄ± saÄŸlayan stres hormonlarÄ±nda bir artÄ±ÅŸa yol aÃ§ar."
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Asur sarayÄ±, sadece kraliyet ikametgÃ¢hÄ± deÄŸil, aynÄ± zamanda imparatorluÄŸun gÃ¼cÃ¼nÃ¼n ve yenilmezliÄŸinin gÃ¶rÃ¼nÃ¼r bir ifadesiydi.",
        "secenekler": [
            "An Assyrian palace was not only a royal residence but also a visible expression of the power due to its indestructibility.",
            "An Assyrian palace was a royal residence since it was a visible expression of the power and indestructibility of the empire.",
            "An Assyrian palace was considered to be both a royal residence and a visible expression of the power and indestructibility of the empire.",
            "An Assyrian palace was more than a royal residence as it was a visible expression of the power and indestructibility of the empire.",
            "An Assyrian palace was not only a royal residence but also a visible expression of the power and indestructibility of the empire."
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Makro fotoÄŸrafÃ§Ä±lÄ±ÄŸÄ±n en Ã¶nemli tekniklerini keÅŸfetmek iÃ§in, fotoÄŸrafÃ§Ä±lar bir bahÃ§ede Ä±ÅŸÄ±k ve konumla Ã§alÄ±ÅŸmalÄ± ve ufak hareketlerle arka planÄ±n nasÄ±l deÄŸiÅŸtiÄŸini fark etmelidir.",
        "secenekler": [
            "The key techniques of macro photography include working with light and position in a garden, through which photographers can notice how the background changes with slight moves.",
            "Discovering the key techniques of macro photography requires photographers to work with light and position in a garden and to notice how the background changes with their slight moves.",
            "To notice the key techniques of macro photography, photographers may work with light and position in a garden and discover how the background changes in accordance with slight moves.",
            "To discover the key techniques in macro photography, photographers need to work with different ranges of light and position in a garden and notice the changes in the background caused by slight moves.",
            "To discover the key techniques of macro photography, photographers should work with light and position in a garden and notice how the background changes with slight moves."
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "KafalarÄ±ndan ciddi ÅŸekilde yaralanmÄ±ÅŸ olan yetiÅŸkinler iÃ§in dÃ¼zelme iki yÄ±l kadar sÃ¼rse de iyileÅŸmenin bÃ¼yÃ¼k kÄ±smÄ± travmadan sonraki ilk altÄ± ay iÃ§inde gerÃ§ekleÅŸir.",
        "secenekler": [
            "Although adults who have had a severe head injury mostly recover from the trauma within the first six months, improvement continues for up to two years.",
            "For adults who have been severely injured in the head, although improvement continues for up to two years, most recovery occurs within the first six months after the trauma.",
            "Adults who have been severely injured in the head are expected to get well in the first six months after the trauma, but their full recovery continues up to two years.",
            "Adults with a severe head injury recover within the first six months after the trauma although some wait for up to two years for full recovery.",
            "For adults who have been severely injured in the head, recovery mostly occurs within the first six months after the trauma, but their situation continues to improve for up to two years."
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Fair skin makes a person more likely to develop skin cancer, but only if he or she has prolonged exposure to intensive sunlight.",
        "secenekler": [
            "Bir kiÅŸi uzun sÃ¼re yoÄŸun gÃ¼neÅŸ Ä±ÅŸÄ±ÄŸÄ±na maruz kalÄ±rsa, aÃ§Ä±k tenli olmasÄ± bu kiÅŸinin cilt kanserine yakalanma riskini artÄ±rÄ±r.",
            "Bir kiÅŸinin uzun sÃ¼re yoÄŸun gÃ¼neÅŸ Ä±ÅŸÄ±ÄŸÄ±na maruz kalÄ±nca cilt kanseri olma olasÄ±lÄ±ÄŸÄ± yalnÄ±zca bu kiÅŸi aÃ§Ä±k tenliyse artar.",
            "AÃ§Ä±k ten, bir kiÅŸinin cilt kanseri olma ihtimalini artÄ±rÄ±r ama ancak kiÅŸi uzun sÃ¼re yoÄŸun gÃ¼neÅŸ Ä±ÅŸÄ±ÄŸÄ±na maruz kalmÄ±ÅŸsa.",
            "AÃ§Ä±k tenli kiÅŸilerin cilt kanserine yakalanma ihtimali, yalnÄ±zca uzun bir sÃ¼re yoÄŸun gÃ¼neÅŸ Ä±ÅŸÄ±ÄŸÄ±na maruz kaldÄ±klarÄ±nda artar.",
            "YoÄŸun gÃ¼neÅŸ Ä±ÅŸÄ±ÄŸÄ±na uzun sÃ¼re maruz kalmak, cilt kanserine yakalanma olasÄ±lÄ±ÄŸÄ±nÄ± artÄ±rÄ±rken, aÃ§Ä±k tenli bir kiÅŸide bu olasÄ±lÄ±k daha yÃ¼ksektir."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Hayatta kalmamÄ±z iÃ§in gerekli bir insani iÃ§gÃ¼dÃ¼ olan gÃ¼ven duygusu, ilk olarak biz kÃ¼Ã§Ã¼k kabileler halinde yaÅŸarken ortaya Ã§Ä±ktÄ± ve muhtemelen anlaÅŸmazlÄ±k zamanlarÄ±nda faydalar saÄŸladÄ±.",
        "secenekler": [
            "Trust, a human instinct that is essential to our survival, first appeared when we lived as small tribes and probably provided benefits in times of conflict.",
            "As a human instinct essential for our survival, trust probably first appeared at the time when we lived as small tribes, and benefitted us during conflicts.",
            "Trust, which is an essential human instinct to our survival, is known to have first appeared during our life in small tribes and probably benefitted us in times of conflict.",
            "Trust has always been essential to our survival as a human instinct and it probably first appeared when we lived as small tribes, bringing benefits in times of conflict.",
            "Trust, which probably benefitted us in times of conflict, first appeared when we lived in small tribes and was an essential human instinct for our survival."
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Jethro Tull, who was one of the first scholars to study the systems of agricultural production in a comparative way, was a famous advocate of the application of new and scientific means of farming.",
        "secenekler": [
            "Jethro Tull, yeni ve bilimsel tarÄ±m yÃ¶ntemlerinin uygulanmasÄ±nÄ±n Ã¼nlÃ¼ bir savunucusu olarak tarÄ±msal Ã¼retim sistemlerini karÅŸÄ±laÅŸtÄ±rmalÄ± bir ÅŸekilde araÅŸtÄ±ran ilk bilim insanlarÄ±ndan biriydi.",
            "TarÄ±msal Ã¼retim sistemlerini karÅŸÄ±laÅŸtÄ±rmalÄ± bir ÅŸekilde araÅŸtÄ±ran ilk bilim insanlarÄ±ndan biri olan Jethro Tull, yeni ve bilimsel tarÄ±m yÃ¶ntemlerinin uygulanmasÄ±nÄ±n Ã¼nlÃ¼ bir savunucusuydu.",
            "Jethro Tull, tarÄ±msal Ã¼retim sistemlerini karÅŸÄ±laÅŸtÄ±rmalÄ± bir ÅŸekilde araÅŸtÄ±ran ilk bilim insanlarÄ±ndan biriydi ve yeni, bilimsel tarÄ±m yÃ¶ntemlerinin uygulanmasÄ±nÄ±n Ã¼nlÃ¼ bir savunucusuydu.",
            "Yeni ve bilimsel tarÄ±m yÃ¶ntemlerinin uygulanmasÄ±nÄ±n Ã¼nlÃ¼ bir savunucusu olan Jethro Tull, tarÄ±msal Ã¼retim sistemlerini karÅŸÄ±laÅŸtÄ±rmalÄ± bir ÅŸekilde araÅŸtÄ±ran ilk bilim insanlarÄ±ndan biriydi.",
            "Jethro Tull, tarÄ±msal Ã¼retim sistemlerini karÅŸÄ±laÅŸtÄ±rmalÄ± bir ÅŸekilde araÅŸtÄ±ran ilk bilim insanlarÄ±ndan biri olmasÄ±nÄ±n yanÄ± sÄ±ra yeni ve bilimsel tarÄ±m yÃ¶ntemlerinin uygulanmasÄ±nÄ±n Ã¼nlÃ¼ bir savunucusuydu."
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Two-thirds of the coral in the northern parts of Australiaâ€™s Great Barrier Reef has disappeared over the past ten years as a result of bleaching caused by a surge in ocean temperatures, which is triggered by a climate phenomenon called El NiÃ±o.",
        "secenekler": [
            "El NiÃ±o olarak adlandÄ±rÄ±lan bir iklim olayÄ± tarafÄ±ndan tetiklenen okyanus sÄ±caklÄ±klarÄ±ndaki artÄ±ÅŸ, Avustralyaâ€™nÄ±n BÃ¼yÃ¼k Set Resifiâ€™nin kuzey bÃ¶lÃ¼mlerindeki mercanlarÄ±n Ã¼Ã§te ikisinin son on yÄ±l iÃ§erisinde beyazlaÅŸarak yok olmasÄ±na neden olmuÅŸtur.",
            "Okyanus sÄ±caklÄ±klarÄ±ndaki artÄ±ÅŸÄ± tetikleyerek Avustralyaâ€™nÄ±n BÃ¼yÃ¼k Set Resifiâ€™nin kuzey bÃ¶lÃ¼mlerindeki mercanlarÄ±n Ã¼Ã§te ikisinin son on yÄ±l iÃ§erisinde beyazlaÅŸma sonucunda yok olmasÄ±na neden olan iklim olayÄ± El NiÃ±o olarak adlandÄ±rÄ±lÄ±r.",
            "Avustralyaâ€™nÄ±n BÃ¼yÃ¼k Set Resifiâ€™nin kuzey bÃ¶lÃ¼mlerindeki mercanlarÄ±n Ã¼Ã§te ikisi, son on yÄ±l iÃ§erisinde El NiÃ±o olarak adlandÄ±rÄ±lan bir iklim olayÄ± tarafÄ±ndan tetiklenen okyanus sÄ±caklÄ±klarÄ±ndaki artÄ±ÅŸÄ±n neden olduÄŸu beyazlaÅŸma sonucunda yok olmuÅŸtur.",
            "Avustralyaâ€™nÄ±n BÃ¼yÃ¼k Set Resifiâ€™nin kuzey bÃ¶lÃ¼mlerindeki mercanlarÄ±n Ã¼Ã§te ikisinin son on yÄ±l iÃ§erisinde yok olma nedeni, El NiÃ±o olarak adlandÄ±rÄ±lan bir iklim olayÄ± tarafÄ±ndan tetiklenen okyanus sÄ±caklÄ±klarÄ±ndaki artÄ±ÅŸÄ±n yol aÃ§tÄ±ÄŸÄ± beyazlaÅŸmadÄ±r.",
            "El NiÃ±o olarak adlandÄ±rÄ±lan bir iklim olayÄ± tarafÄ±ndan tetiklenen okyanus sÄ±caklÄ±klarÄ±ndaki artÄ±ÅŸ beyazlaÅŸmaya yol aÃ§tÄ±ÄŸÄ± iÃ§in Avustralyaâ€™nÄ±n BÃ¼yÃ¼k Set Resifiâ€™nin kuzey bÃ¶lÃ¼mlerindeki mercanlarÄ±n Ã¼Ã§te ikisi son on yÄ±l iÃ§erisinde yok olmuÅŸtur."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Huntington hastalÄ±ÄŸÄ±nÄ±n yavaÅŸlatÄ±labilmesi amacÄ±yla huntingtin proteinin Ã¼retimini durduran yeni bir ilaÃ§ geliÅŸtirildi.",
        "secenekler": [
            "Huntington's disease could be slowed thanks to a novel drug designed to stop the production of the huntingtin protein.",
            "A novel drug that stops the production of the huntingtin protein has been designed in order that Huntington's disease could be slowed.",
            "The production of huntingtin protein, which causes Huntington's disease, can be stopped by a novel drug that has been designed to treat the disease.",
            "So as to treat Huntington's disease, a novel drug has been designed to prevent the production of the huntingtin protein.",
            "A novel drug that has been designed to stop the production of the huntingtin protein could slow Huntington's disease."
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Deprem sÄ±rasÄ±nda Ã§eÅŸitli sismik dalgalar gezegenimize yayÄ±lÄ±r ve bunlarÄ±n hÄ±zÄ± ve yÃ¶nÃ¼nÃ¼ belirlemek, yer kabuÄŸunun haritalarÄ±nÄ± yapmak ve gelecekteki depremlerin ne kadar yÄ±kÄ±cÄ± olabileceÄŸini tahmin etmek aÃ§Ä±sÄ±ndan gereklidir.",
        "secenekler": [
            "The speed and direction of various seismic waves that travel through our planet during an earthquake are essential to make maps of Earthâ€™s crust and predict how disastrous the future strikes can be.",
            "During an earthquake various seismic waves travel through our planet, and determining their speed and direction is essential for making maps of Earthâ€™s crust and predicting how devastating the future strikes may be.",
            "By determining the speed and direction of various seismic waves that travel through our planet during an earthquake, it is possible to make the essential maps of Earthâ€™s crust and predict how catastrophic the future strikes can be.",
            "During an earthquake, the speed and direction of various seismic waves that travel through our planet can be determined, and this is essential for making maps of Earthâ€™s crust and predicting how catastrophic the future strikes could be.",
            "During an earthquake, it is essential to determine the speed and direction of various seismic waves travelling through our planet, which is important for making maps of Earthâ€™s crust and predicting how disastrous the future strikes might be."
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Although many of the territories that the Romans conquered initially resisted, the residents of these provinces, particularly the former ruling classes, gradually adopted many Roman customs.",
        "secenekler": [
            "RomalÄ±larÄ±n fethettiÄŸi bÃ¶lgelerde, Ã¶zellikle Ã¶nceki yÃ¶netici sÄ±nÄ±flar ve bu ÅŸehirlerde yaÅŸayanlar baÅŸlangÄ±Ã§ta dirense de yavaÅŸ yavaÅŸ birÃ§ok Roma geleneÄŸini benimsemiÅŸtir.",
            "RomalÄ±larÄ±n fethettiÄŸi bÃ¶lgelerin Ã§oÄŸunda, Ã¶nceki yÃ¶netici sÄ±nÄ±flar ve bu ÅŸehirlerin sakinleri Roma geleneklerine baÅŸlangÄ±Ã§ta karÅŸÄ± Ã§Ä±ksa da sonradan bunlarÄ± yavaÅŸ yavaÅŸ benimsemiÅŸtir.",
            "RomalÄ±larÄ±n fethettiÄŸi bÃ¶lgelerin Ã§oÄŸunun baÅŸlangÄ±Ã§ta direnmesine raÄŸmen bu ÅŸehirlerin sakinleri, Ã¶zellikle de Ã¶nceki yÃ¶netici sÄ±nÄ±flar, yavaÅŸ yavaÅŸ birÃ§ok Roma geleneÄŸini benimsemiÅŸtir.",
            "RomalÄ±larÄ±n fethettiÄŸi bÃ¶lgelerin Ã§oÄŸu baÅŸlangÄ±Ã§ta Roma geleneklerini kabul etmemiÅŸtir ancak bu ÅŸehirlerin sakinleri, Ã¶zellikle de Ã¶nceki yÃ¶netici sÄ±nÄ±flar yavaÅŸ yavaÅŸ birÃ§ok geleneÄŸi benimsemiÅŸtir.",
            "RomalÄ±larÄ±n fethettiÄŸi bÃ¶lgelerde, baÅŸlangÄ±Ã§ta hem Ã¶nceki yÃ¶netici sÄ±nÄ±flarÄ±n hem de bu ÅŸehirlerin sakinlerinin Roma geleneklerine direnmiÅŸ olmalarÄ±na raÄŸmen birÃ§oÄŸu yavaÅŸ yavaÅŸ benimsenmiÅŸtir."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Because animals make up an important part of nature and some research cannot be conducted using humans, animals are unfortunately also participants in psychological research.",
        "secenekler": [
            "Hayvanlar doÄŸanÄ±n Ã¶nemli bir parÃ§asÄ±nÄ± oluÅŸturduÄŸu ve bazÄ± araÅŸtÄ±rmalar insanlar kullanÄ±larak yÃ¼rÃ¼tÃ¼lemeyeceÄŸi iÃ§in hayvanlar ne yazÄ±k ki psikolojik araÅŸtÄ±rmalarÄ±n da katÄ±lÄ±mcÄ±larÄ±dÄ±r.",
            "DoÄŸanÄ±n Ã¶nemli bir parÃ§asÄ±nÄ± oluÅŸturan hayvanlar, ne yazÄ±k ki insanlar kullanÄ±larak yÃ¼rÃ¼tÃ¼lemeyen bazÄ± psikolojik araÅŸtÄ±rmalarÄ±n da katÄ±lÄ±mcÄ±larÄ±dÄ±r.",
            "HayvanlarÄ±n doÄŸanÄ±n Ã¶nemli bir parÃ§asÄ± olmasÄ± ve bazÄ± araÅŸtÄ±rmalarÄ±n insanlar kullanÄ±larak yÃ¼rÃ¼tÃ¼lememesi, ne yazÄ±k ki hayvanlarÄ± psikolojik araÅŸtÄ±rmalarÄ±n da katÄ±lÄ±mcÄ±sÄ± hÃ¢line getirmiÅŸtir.",
            "HayvanlarÄ±n da psikolojik araÅŸtÄ±rmalara dÃ¢hil olmasÄ±, doÄŸanÄ±n Ã¶nemli bir parÃ§asÄ±nÄ± oluÅŸturmalarÄ± ve ne yazÄ±k ki bazÄ± araÅŸtÄ±rmalarÄ±n insanlar kullanÄ±larak yÃ¼rÃ¼tÃ¼lememesinden kaynaklanmaktadÄ±r.",
            "DoÄŸanÄ±n Ã¶nemli bir parÃ§asÄ±nÄ± oluÅŸtursalar da bazÄ± araÅŸtÄ±malarÄ±n insanlar kullanÄ±larak yÃ¼rÃ¼tÃ¼lememesi nedeniyle hayvanlar ne yazÄ±k ki psikolojik araÅŸtÄ±rmalarÄ±n da katÄ±lÄ±mcÄ±larÄ±dÄ±r."
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Son yÄ±llarda iÅŸ gÃ¼cÃ¼nde kadÄ±n sayÄ±sÄ± artmÄ±ÅŸ olmasÄ±na raÄŸmen kadÄ±n ve erkeklerin kiÅŸisel Ã¶zellikleriyle ilgili kalÄ±plaÅŸmÄ±ÅŸ fikirler Ã§ok az deÄŸiÅŸiklik gÃ¶stermiÅŸtir.",
        "secenekler": [
            "Even though the number of women in the workforce has expanded in recent years, gender stereotypes regarding womenâ€™s and menâ€™s personal characteristics have shown little change.",
            "The number of women in the workforce has increased in recent years, but little change has been observed in gender stereotypes related to womenâ€™s and menâ€™s personal characteristics.",
            "Although there are more and more women in the workforce in recent years, little change has been detected in gender stereotypes associated with womenâ€™s and menâ€™s personal characteristics.",
            "As the number of women in the workforce has expanded in recent years, gender stereotypes based on womenâ€™s and menâ€™s personal characteristics have undergone little change.",
            "The number of women in the workforce has been increasing over the years; however, gender stereotypes related to womenâ€™s and menâ€™s personal characteristics have changed little."
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Archaeology, which combines the accumulated knowledge of centuries of investigation, gives us the story of the human past on our planet.",
        "secenekler": [
            "Ä°nsanlÄ±ÄŸÄ±n gezegenimizdeki geÃ§miÅŸinin hikÃ¢yesini sunan arkeoloji yÃ¼zyÄ±llar boyunca sÃ¼ren araÅŸtÄ±rmalarÄ±n sonucunda biriken bilgiyi bir araya getirmektedir.",
            "Arkeoloji yÃ¼zyÄ±llardÄ±r devam eden araÅŸtÄ±rmalar sonucunda biriken bilgiyi bir araya getirmekte ve insanlÄ±ÄŸÄ±n gezegenimizdeki geÃ§miÅŸinin hikÃ¢yesini sunmaktadÄ±r.",
            "Arkeoloji bizlere insanlÄ±ÄŸÄ±n gezegenimizdeki geÃ§miÅŸinin hikÃ¢yesini sunarken, yÃ¼zyÄ±llardÄ±r devam eden araÅŸtÄ±rmalar sonucu birikmiÅŸ olan bilgiyi bir araya getirmektedir.",
            "YÃ¼zyÄ±llardÄ±r devam eden araÅŸtÄ±rmalar sonucunda birikmiÅŸ olan bilgiyi bir araya getiren arkeoloji bizlere insanlÄ±ÄŸÄ±n gezegenimizdeki geÃ§miÅŸinin hikÃ¢yesini sunmaktadÄ±r.",
            "YÃ¼zyÄ±llar boyunca yapÄ±lan araÅŸtÄ±rmalar sonucu biriken bilgi arkeoloji tarafÄ±ndan bir araya getirilerek bizlere insanlÄ±ÄŸÄ±n gezegenimizdeki geÃ§miÅŸinin hikÃ¢yesi sunulmaktadÄ±r."
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Ebeveyn olma rolÃ¼ne iliÅŸkin yoÄŸun bir yorgunluk ve ilgisizlik durumu olarak tanÄ±mlanan ebeveyn tÃ¼kenmiÅŸliÄŸinin, etkisizlik hissi ve Ã§ocuklardan uzaklaÅŸma gibi tipik belirtileri bulunmaktadÄ±r.",
        "secenekler": [
            "Parental burnout, defined as a state of intense fatigue and apathy with characteristic symptoms like a feeling of ineffectiveness and detachment from children, is related to the role of being a parent.",
            "Parental burnout, which has characteristic symptoms like a feeling of ineffectiveness and detachment from children, is defined as a state of intense fatigue and apathy related to the role of being a parent.",
            "A feeling of ineffectiveness and detachment from children are characteristic symptoms of parental burnout, which is defined as a state of intense fatigue and apathy related to the role of being a parent.",
            "Parental burnout is defined as a state of intense fatigue and apathy that is related to the role of being a parent and has characteristic symptoms like a feeling of ineffectiveness and detachment from children.",
            "Parental burnout, which is defined as a state of intense fatigue and apathy related to the role of being a parent, has characteristic symptoms like a feeling of ineffectiveness and detachment from children."
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Evrendeki diÄŸer temel gÃ¼Ã§lerle karÅŸÄ±laÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda oldukÃ§a zayÄ±f olmasÄ±na raÄŸmen, yerÃ§ekimi evrendeki en devasa cisimlerin hareketlerinin arkasÄ±ndaki itici gÃ¼Ã§tÃ¼r.",
        "secenekler": [
            "Compared to the other fundamental forces in the universe, gravity is weak, yet it is considered to be the driving force behind the motions of many objects in the universe.",
            "When compared to the other vital forces in the universe, gravity is the weakest, but it is still the driving force behind the motions of the most massive objects in the universe.",
            "Although it is quite weak compared to the other fundamental forces in the universe, gravity is the driving force behind the motions of the most massive objects in the universe.",
            "Gravity is the basic driving force behind the motions of many massive objects in the universe despite the fact that it is the weakest force in the universe.",
            "Gravity, admittedly weaker than the other basic forces in the universe, is the driving force behind the motions of several massive objects in the universe."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "DÃ¼nya siyasetinde tarih boyunca sÃ¼regelen ekonomik, askeri, siyasi ve sosyal rekabette coÄŸrafya ilminin Ã¼lkelere kazandÄ±rdÄ±ÄŸÄ± Ã¼stÃ¼nlÃ¼k, her geÃ§en gÃ¼n daha Ã§ok hissedilmektedir.",
        "secenekler": [
            "The superiority nations have had over each other in the economic, military, political and social competition continuing throughout history in world politics is due to the science of geography, and is being felt much more day by day.",
            "The science of geography has earned nations superiority in the economic, military, political and social competition, which has been continuing throughout history in world politics and is being felt much more day by day.",
            "The superiority the science of geography has earned nations in the economic, military, political and social competition continuing throughout history in world politics is being felt much more day by day.",
            "The superiority, which is being felt much more day by day, has been offered by the science of geography to nations in the economic, military, political and social competition continuing throughout history in world politics.",
            "The superiority the science of geography has offered countries in the economic, military, political and social competition has continued throughout history in world politics and is being felt much more day by day."
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "The stages of language development are universal for all humans; however, the age and the pace at which a child reaches each stage of language development vary greatly.",
        "secenekler": [
            "Bir Ã§ocuÄŸun tÃ¼m insanlar iÃ§in evrensel olan dil geliÅŸiminin her bir aÅŸamasÄ±na hangi yaÅŸta ve hÄ±zda eriÅŸtiÄŸi konusunda bÃ¼yÃ¼k farklÄ±lÄ±klar vardÄ±r.",
            "Dil geliÅŸiminin aÅŸamalarÄ± tÃ¼m insanlar iÃ§in evrensel olmasÄ±na raÄŸmen bir Ã§ocuÄŸun eriÅŸtiÄŸi her bir dil geliÅŸimi aÅŸamasÄ±, yaÅŸ ve hÄ±z bakÄ±mÄ±ndan bÃ¼yÃ¼k deÄŸiÅŸiklik gÃ¶sterir.",
            "Dil geliÅŸiminin her bir aÅŸamasÄ±na hangi yaÅŸta ve hÄ±zda eriÅŸildiÄŸi konusunda Ã§ocuklar arasÄ±nda farklÄ±lÄ±klar bulunmaktadÄ±r ancak dil geliÅŸiminin aÅŸamalarÄ± tÃ¼m insanlar iÃ§in evrenseldir.",
            "Dil geliÅŸiminin aÅŸamalarÄ± tÃ¼m insanlar iÃ§in evrenseldir ancak bir Ã§ocuÄŸun dil geliÅŸiminin her bir aÅŸamasÄ±na eriÅŸtiÄŸi yaÅŸ ve hÄ±z bÃ¼yÃ¼k Ã¶lÃ§Ã¼de deÄŸiÅŸiklik gÃ¶stermektedir.",
            "TÃ¼m insanlar iÃ§in evrensel olan dil geliÅŸimi aÅŸamalarÄ± bir Ã§ocuÄŸun bu aÅŸamalarÄ±n her birine eriÅŸtiÄŸi yaÅŸ ve hÄ±z bakÄ±mÄ±ndan bÃ¼yÃ¼k deÄŸiÅŸiklik gÃ¶stermektedir."
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Normal sigaralardan daha gÃ¼venli diye pazarlanan elektronik sigaralar, ciÄŸerlere kanserojenler de dÃ¢hil zehirli kimyasallardan oluÅŸan bir karÄ±ÅŸÄ±m gÃ¶nderir ve bu sigaralarÄ± kullanmak antibiyotiÄŸe direnÃ§li bakteriyel enfeksiyonlara bile yol aÃ§abilir.",
        "secenekler": [
            "Marketed as safer than regular cigarettes, electronic cigarettes contain carcinogens and send a coctail of toxic chemicals into the lungs, so the use of these cigarettes can even result in bacterial infections that are resistant to antibiotics.",
            "Although â€‹electronic cigarettes are marketed as safer than regular cigarettes, using these ciggarettes may even lead to antibiotic-resistant bacterial infections since they deliver a coctail consisting of toxic chemicals, including carcinogens, into the l",
            "Using electronic cigarettes may even cause antibiotic-resistant bacterial infections due to the delivery of a coctail of toxic chemicals into the lungs, including carcinogens, while they are advertised to be safer than regular cigarettes.",
            "Electronic cigarettes, marketed as safer than regular cigarettes, deliver a coctail made up of toxic chemicals, including carcinogens, into the lungs, and using these cigarettes may even lead to antibiotic-resistant bacterial infections.",
            "Smoking electronic cigarettes, which is advertised to be safer than the use of regular ones, delivers a coctail of toxic chemicals and carcinogens into the lungs, and can even result in bacterial infections that are antibiotic-resistant."
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Mental health disorders generally occur when people, who are vulnerable to such disorders due to their genetic make-up, experience extreme stress in their social lives.",
        "secenekler": [
            "Ruh saÄŸlÄ±ÄŸÄ± bozukluklarÄ±nda, genellikle genetik yapÄ±larÄ±ndan dolayÄ± bu tÃ¼r bozukluklara karÅŸÄ± savunmasÄ±z olan insanlarÄ±n sosyal hayatlarÄ±ndaki aÅŸÄ±rÄ± stres Ã¶nemli bir yer tutar.",
            "Genetik yapÄ±larÄ±ndan dolayÄ± ruh saÄŸlÄ±ÄŸÄ± bozukluklarÄ±na karÅŸÄ± savunmasÄ±z olan insanlar, genellikle sosyal hayatlarÄ±nda aÅŸÄ±rÄ± stres yaÅŸarlar.",
            "Genetik yapÄ±larÄ±ndan dolayÄ± ruh saÄŸlÄ±ÄŸÄ± bozukluklarÄ±na karÅŸÄ± genellikle savunmasÄ±z olan insanlarda Ã§ok fazla stres, bu tÃ¼r bozukluklarÄ± beraberinde getirir.",
            "Ä°nsanlar Ã§ok fazla stres altÄ±nda olduklarÄ±nda, ruh saÄŸlÄ±ÄŸÄ± bozukluklarÄ±na karÅŸÄ± savunmasÄ±zlarsa genellikle bu tÃ¼r bozukluklar meydana gelir.",
            "Ruh saÄŸlÄ±ÄŸÄ± bozukluklarÄ±; genellikle, genetik yapÄ±larÄ±ndan dolayÄ± bu tÃ¼r bozukluklara karÅŸÄ± savunmasÄ±z olan insanlar sosyal hayatlarÄ±nda aÅŸÄ±rÄ± stres yaÅŸadÄ±klarÄ±nda ortaya Ã§Ä±kar."
        ],
        "dogruCevap": "E"
    },
 ];
        const TOPLAM_SORU = SORU_HAVUZU.length;
        const SORU_BASINA_DAKIKA = 1.5;
        const SINAV_SURESI_DAKIKA = Math.ceil(TOPLAM_SORU * SORU_BASINA_DAKIKA);
        let state = {};
        function resetState() { state = { mevcutSoruIndex: 0, sorular: [], ogrenciCevaplari: {}, ustuCiziliSecenekler: {}, sinavAktif: false, isReviewMode: false, mainTimerInterval: null, currentTimeInterval: null, sonSonuc: null }; }
        
        window.onload = function() {
            if (sessionStorage.getItem('sinavAktif')) {
                sessionStorage.removeItem('sinavAktif');
                document.body.innerHTML = `<div style="text-align:center; padding: 50px; font-family: 'Poppins', sans-serif;"><h1>SÄ±nav esnasÄ±nda sayfa yenilemek kural dÄ±ÅŸÄ±dÄ±r. Oturumunuz sonlandÄ±rÄ±ldÄ±.</h1><p><a href='index.html'>Ana Sayfaya DÃ¶n</a></p></div>`;
                return;
            }
            resetState(); olayDinleyicileriEkle(); kullaniciBilgileriniYukle(); 
            const reviewDataString = sessionStorage.getItem('reviewData'); 
            if (reviewDataString) { const reviewData = JSON.parse(reviewDataString); sinaviIncelemeModundaBaslat(reviewData); sessionStorage.removeItem('reviewData'); } 
            else { sinaviBaslat(); } 
        };
        
        function olayDinleyicileriEkle() {
            ui.sonlandirBtn.addEventListener('click', () => { showOnayPopup('SÄ±navÄ± sonlandÄ±rmak istediÄŸinize emin misiniz? CevaplarÄ±nÄ±z kaydedilecek.', () => sinaviSonlandir(true)); });
            ui.prevBtn.addEventListener('click', oncekiSoru);
            ui.nextBtn.addEventListener('click', sonrakiSoru);
            document.getElementById('sorulari-incele-btn').addEventListener('click', () => { if (state.sonSonuc) { sessionStorage.setItem('reviewData', JSON.stringify(state.sonSonuc)); window.location.reload(); } });
            document.getElementById('yeni-sinav-btn').addEventListener('click', () => { sessionStorage.removeItem('sinavGecmisi'); location.reload(); });
            document.getElementById('sistemden-cikis-btn').addEventListener('click', () => { showBilgiPopup('SÄ±nava katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz. Ana sayfaya yÃ¶nlendiriliyorsunuz.', () => { window.location.href = 'index.html'; }); });
            ui.soruIcerik.addEventListener('change', handleCevap);
            ui.optikFormIcerik.addEventListener('change', handleCevap);
            ui.soruIcerik.addEventListener('contextmenu', handleStrikethrough);
            ui.soruIcerik.addEventListener('click', (event) => { if (state.isReviewMode) return; const listItem = event.target.closest('li'); if (listItem && !event.target.closest('label')) { const radio = listItem.querySelector('input[type="radio"]'); if (radio && !radio.checked) { radio.checked = true; radio.dispatchEvent(new Event('change', { bubbles: true })); } } });
            document.getElementById('optik-form-sonuc').addEventListener('click', (event) => { const satir = event.target.closest('.cevap-anahtari-satir'); if (satir && satir.dataset.soruId) { showSoruDetayPopup(parseInt(satir.dataset.soruId)); } });
            ui.sonuclaraDonBtn.addEventListener('click', () => {
                if (state.sonSonuc) {
                    showSonucSayfasi(state.sonSonuc);
                }
            });
        }
        
        async function sinaviSonlandir(kullaniciIstegi) { state.sinavAktif = false; sessionStorage.removeItem('sinavAktif'); clearInterval(state.mainTimerInterval); clearInterval(state.currentTimeInterval); document.querySelectorAll('#sinav-arayuzu input, #sinav-arayuzu button').forEach(el => el.disabled = true); const sonuc = sonuclariHesapla(); state.sonSonuc = sonuc.local; await sonucuSunucuyaGonder(sonuc.firebase); sonucuLocaleKaydet(sonuc.local); let mesaj = kullaniciIstegi ? "SÄ±navÄ±nÄ±z sonlandÄ±rÄ±lmÄ±ÅŸtÄ±r.<br>SonuÃ§larÄ±nÄ±z baÅŸarÄ±yla kaydedildi." : "SÃ¼reniz dolduÄŸu iÃ§in sÄ±navÄ±nÄ±z sonlandÄ±rÄ±lmÄ±ÅŸtÄ±r.<br>SonuÃ§larÄ±nÄ±z baÅŸarÄ±yla kaydedildi."; showBilgiPopup(mesaj, () => { startResultsCountdown(sonuc.local); }); }
        function startResultsCountdown(sonuc) { ui.sayacPopup.classList.add('show'); let sayac = 10; const sayacElementi = document.getElementById('gerisayim-sayaci'); sayacElementi.textContent = sayac; const interval = setInterval(() => { sayac--; sayacElementi.textContent = sayac; if (sayac <= 0) { clearInterval(interval); ui.sayacPopup.classList.remove('show'); showSonucSayfasi(sonuc); } }, 1000); }
        function showSonucSayfasi(sonuc) { ui.sinavArayuzu.style.display = 'none'; ui.sonucArayuzu.style.display = 'block'; const isim = sessionStorage.getItem('kullaniciIsim') || 'Misafir'; const soyisim = sessionStorage.getItem('kullaniciSoyisim') || 'Aday'; document.getElementById('sonuc-kullanici-ad-soyad').textContent = `${isim.toUpperCase()} ${soyisim.toUpperCase()}`; document.getElementById('sinav-tarihi').textContent = sonuc.tarih; document.getElementById('dogru-sayisi').textContent = sonuc.dogruSayisi; document.getElementById('yanlis-sayisi').textContent = sonuc.yanlisSayisi; document.getElementById('bos-sayisi').textContent = sonuc.bosSayisi; document.getElementById('net-sayisi').textContent = sonuc.netSayisi; sonucOptikFormuCiz(sonuc); gecmisSinavlariYukle(); }
        
        function sonucOptikFormuCiz(sonuc) {
            const container = document.getElementById('optik-form-sonuc'); let html = '';
            sonuc.sorular.forEach(soru => {
                const ogrenciCevabi = sonuc.ogrenciCevaplari[soru.id]; const dogruCevap = soru.dogruCevap; let durumText = '', durumClass = '';
                if (!ogrenciCevabi) { durumText = 'BOÅ'; durumClass = 'durum-bos'; } else if (ogrenciCevabi === dogruCevap) { durumText = 'DOÄRU'; durumClass = 'durum-dogru'; } else { durumText = 'YANLIÅ'; durumClass = 'durum-yanlis'; }
                html += `<div class="cevap-anahtari-satir" data-soru-id="${soru.id}"><div class="cevap-soru-no">${soru.id}. Soru</div><div class="cevap-secenekler">`;
                ['A', 'B', 'C', 'D', 'E'].forEach(secenek => {
                    let siniflar = 'cevap-secenek';
                    if (secenek === dogruCevap) siniflar += ' dogru-cevap';
                    if (secenek === ogrenciCevabi) { siniflar += ' ogrenci-cevabi'; if (ogrenciCevabi !== dogruCevap) siniflar += ' yanlis-cevap'; }
                    html += `<div class="${siniflar}">${secenek}</div>`;
                });
                html += `</div><div class="cevap-durum ${durumClass}">${durumText}</div></div>`;
            });
            container.innerHTML = html;
        }

        function showSoruDetayPopup(soruId) {
            const soru = state.sonSonuc.sorular.find(s => s.id === soruId); const ogrenciCevabi = state.sonSonuc.ogrenciCevaplari[soruId]; const dogruCevap = soru.dogruCevap;
            document.getElementById('soru-detay-baslik').textContent = `Soru ${soru.id} DetayÄ±`; document.getElementById('soru-detay-metin').innerHTML = soru.metin;
            const seceneklerContainer = document.getElementById('soru-detay-secenekler'); let seceneklerHtml = '';
            soru.secenekler.forEach((secenekMetni, index) => {
                const secenekHarfi = String.fromCharCode(65 + index);
                let rowClass = 'soru-detay-secenekler-item'; let iconHtml = '<span class="status-icon"></span>';
                const isCorrect = (secenekHarfi === dogruCevap); const isStudentAnswer = (secenekHarfi === ogrenciCevabi);
                if (isCorrect) { rowClass += ' correct-answer'; iconHtml = '<span class="status-icon icon-correct">âœ“</span>'; }
                if (isStudentAnswer && !isCorrect) { rowClass += ' incorrect-answer'; iconHtml = '<span class="status-icon icon-incorrect">âœ—</span>'; }
                seceneklerHtml += `<li class="${rowClass}"><div><span class="harf">${secenekHarfi})</span><span>${secenekMetni}</span></div>${iconHtml}</li>`;
            });
            seceneklerContainer.innerHTML = seceneklerHtml;
            ui.soruDetayPopup.classList.add('show'); document.getElementById('soru-detay-kapat-btn').onclick = () => ui.soruDetayPopup.classList.remove('show');
        }

        function sinaviBaslat() { if (state.sinavAktif) return; resetState(); if (!sorulariYukle()) return; ui.sonucArayuzu.style.display = 'none'; ui.sinavArayuzu.style.display = 'block'; state.sinavAktif = true; sessionStorage.setItem('sinavAktif', 'true'); optikFormuCiz(); soruyuEkranaCiz(state.mevcutSoruIndex); startMainExamTimer(); startCurrentTime('exam-current-time'); }
        
        function sinaviIncelemeModundaBaslat(reviewData) {
            resetState();
            state.isReviewMode = true;
            state.sonSonuc = reviewData;
            state.sorular = reviewData.sorular;
            state.ogrenciCevaplari = reviewData.ogrenciCevaplari;
            
            ui.sonucArayuzu.style.display = 'none'; 
            ui.sinavArayuzu.style.display = 'block'; 

            document.getElementById('main-exam-timer').textContent = "Ä°NCELEME";
            ui.sonlandirBtn.style.display = 'none';
            ui.sonuclaraDonBtn.style.display = 'flex'; 

            optikFormuCiz();
            soruyuEkranaCiz(state.mevcutSoruIndex);
            cevaplariGoster();
        }

        function cevaplariGoster() { state.sorular.forEach(soru => { const ogrenciCevabi = state.ogrenciCevaplari[soru.id]; const dogruCevap = soru.dogruCevap; const dogruLabel = document.querySelector(`#optik-soru-${soru.id} label[for='optik-${soru.id}-${dogruCevap}']`); if (dogruLabel) dogruLabel.classList.add('dogru'); if (ogrenciCevabi && ogrenciCevabi !== dogruCevap) { const yanlisLabel = document.querySelector(`#optik-soru-${soru.id} label[for='optik-${soru.id}-${ogrenciCevabi}']`); if (yanlisLabel) yanlisLabel.classList.add('yanlis'); } }); }
        function soruyuEkranaCiz(index) { const soru = state.sorular[index]; const isDisabled = state.isReviewMode ? "disabled" : ""; const ustucizililer = state.ustuCiziliSecenekler[soru.id] || []; let seceneklerHtml = `<div class="question-number">Soru ${soru.id}</div><div class="instruction-box">${soru.talimat}</div><div class="question-text">${soru.metin}</div><ul class="options-list">`; soru.secenekler.forEach((secenek, i) => { const secenekHarfi = String.fromCharCode(65 + i); const isChecked = state.ogrenciCevaplari[soru.id] === secenekHarfi; const isStriked = ustucizililer.includes(secenekHarfi); seceneklerHtml += `<li class="${isChecked ? "selected" : ""} ${isStriked ? "strikethrough" : ""}" data-option="${secenekHarfi}"><input type="radio" id="secenek-${soru.id}-${secenekHarfi}" name="soru-${soru.id}" value="${secenekHarfi}" ${isChecked ? "checked" : ""} ${isDisabled} data-soru-id="${soru.id}"><label for="secenek-${soru.id}-${secenekHarfi}">${secenekHarfi}</label><span>${secenek}</span></li>`; }); seceneklerHtml += "</ul>"; ui.soruIcerik.innerHTML = seceneklerHtml; ui.prevBtn.classList.toggle("disabled", index === 0); ui.nextBtn.classList.toggle("disabled", index === state.sorular.length - 1); }
        function optikFormuCiz() { const isDisabled = state.isReviewMode ? "disabled" : ""; let html = ""; state.sorular.forEach(soru => { html += `<div class="optik-grup" id="optik-soru-${soru.id}"><span class="soru-no">${soru.id}</span><div class="optik-secenekler">`; ['A', 'B', 'C', 'D', 'E'].forEach(secenek => { const isChecked = state.ogrenciCevaplari[soru.id] === secenek; html += `<input type="radio" id="optik-${soru.id}-${secenek}" name="optik-soru${soru.id}" value="${secenek}" ${isChecked ? "checked" : ""} ${isDisabled} data-soru-id="${soru.id}"><label for="optik-${soru.id}-${secenek}">${secenek}</label>`; }); html += `</div></div>`; }); ui.optikFormIcerik.innerHTML = html; }
        function guncelleCevapUI(soruId, secenek) { document.querySelectorAll(`#soru-icerik li`).forEach(li => li.classList.remove('selected')); const selectedLi = document.querySelector(`#soru-icerik li[data-option="${secenek}"]`); if (selectedLi) selectedLi.classList.add('selected'); const optikRadio = document.querySelector(`#optik-${soruId}-${secenek}`); if (optikRadio) optikRadio.checked = true; }
        function handleCevap(event) { if (event.target.type === 'radio' && !state.isReviewMode) { const soruId = parseInt(event.target.dataset.soruId); const cevap = event.target.value; state.ogrenciCevaplari[soruId] = cevap; guncelleCevapUI(soruId, cevap); } }
        function handleStrikethrough(event) { if (state.isReviewMode) return; const listItem = event.target.closest('li'); if (listItem) { event.preventDefault(); const soruId = state.sorular[state.mevcutSoruIndex].id; const secenek = listItem.dataset.option; if (!state.ustuCiziliSecenekler[soruId]) state.ustuCiziliSecenekler[soruId] = []; const index = state.ustuCiziliSecenekler[soruId].indexOf(secenek); if (index > -1) state.ustuCiziliSecenekler[soruId].splice(index, 1); else state.ustuCiziliSecenekler[soruId].push(secenek); listItem.classList.toggle('strikethrough'); } }
        function kullaniciBilgileriniYukle() { const isim = sessionStorage.getItem('kullaniciIsim'); const soyisim = sessionStorage.getItem('kullaniciSoyisim'); const gorunecekIsim = (isim && soyisim) ? `${isim} ${soyisim}` : 'Misafir Aday'; ui.kullaniciAdSoyad.textContent = gorunecekIsim; }
        function sorulariYukle() { if (TOPLAM_SORU === 0) return false; state.sorular = SORU_HAVUZU.map((soru, index) => ({ id: index + 1, talimat: "For these questions, choose the best word or expression to fill the space.", ...soru })); return true; }
        function sonuclariHesapla() { let dogru = 0, yanlis = 0, bos = 0; const isim = sessionStorage.getItem('kullaniciIsim') || 'Bilinmeyen'; const soyisim = sessionStorage.getItem('kullaniciSoyisim') || 'Ã–ÄŸrenci'; state.sorular.forEach(soru => { const ogrenciCevabi = state.ogrenciCevaplari[soru.id]; if (!ogrenciCevabi) bos++; else if (ogrenciCevabi === soru.dogruCevap) dogru++; else yanlis++; }); const net = (dogru - (yanlis / 4)).toFixed(2); const sonucData = { isim, soyisim, dogruSayisi: dogru, yanlisSayisi: yanlis, bosSayisi: bos, netSayisi: net, toplamSoru: TOPLAM_SORU, sorular: state.sorular, ogrenciCevaplari: state.ogrenciCevaplari }; return { firebase: { ...sonucData, tarih: serverTimestamp() }, local: { ...sonucData, tarih: new Date().toLocaleString('tr-TR') } }; }
        function sonucuLocaleKaydet(sonuc) { let sinavGecmisi = JSON.parse(localStorage.getItem('sinavGecmisi')) || []; sinavGecmisi.push(sonuc); localStorage.setItem('sinavGecmisi', JSON.stringify(sinavGecmisi)); }
        async function sonucuSunucuyaGonder(sonuc) { try { await addDoc(collection(db, "sonuclar"), sonuc); console.log("SonuÃ§ baÅŸarÄ±yla Firebase'e kaydedildi."); } catch (e) { console.error("Firebase'e yazÄ±lÄ±rken hata oluÅŸtu: ", e); } }
        function gecmisSinavlariYukle() { const gecmis = JSON.parse(localStorage.getItem('sinavGecmisi')) || []; const container = document.getElementById('gecmis-listesi'); if(gecmis.length === 0) { container.innerHTML = "<p>SÄ±nav geÃ§miÅŸi bulunamadÄ±.</p>"; return; } container.innerHTML = '<h4>TÃ¼m SÄ±nav GeÃ§miÅŸi</h4>'; [...gecmis].reverse().forEach(sonuc => { const item = document.createElement('div'); item.className = 'history-item'; item.innerHTML = `<div class="tarih">${sonuc.tarih}</div><div><strong>D:</strong> ${sonuc.dogruSayisi} | <strong>Y:</strong> ${sonuc.yanlisSayisi} | <strong>B:</strong> ${sonuc.bosSayisi} | <strong>Net:</strong> ${sonuc.netSayisi}</div>`; container.appendChild(item); }); }
        function startCurrentTime(elementId) { const timeEl = document.getElementById(elementId); if (timeEl) { state.currentTimeInterval = setInterval(() => { timeEl.textContent = new Date().toLocaleTimeString("tr-TR", { hour: '2-digit', minute:'2-digit' }); }, 1000); } }
        function startMainExamTimer() { const timerEl = document.getElementById('main-exam-timer'); let saniye = SINAV_SURESI_DAKIKA * 60; state.mainTimerInterval = setInterval(() => { if (saniye < 0) { clearInterval(state.mainTimerInterval); sinaviSonlandir(false); return; } const saat = Math.floor(saniye / 3600); const dakika = Math.floor((saniye % 3600) / 60); const kalanSaniye = saniye % 60; timerEl.textContent = [saat, dakika, kalanSaniye].map(v => v < 10 ? '0' + v : v).join(':'); saniye--; }, 1000); }
        function sonrakiSoru() { if (state.mevcutSoruIndex < state.sorular.length - 1) { state.mevcutSoruIndex++; soruyuEkranaCiz(state.mevcutSoruIndex); } }
        function oncekiSoru() { if (state.mevcutSoruIndex > 0) { state.mevcutSoruIndex--; soruyuEkranaCiz(state.mevcutSoruIndex); } }
        function showOnayPopup(mesaj, callback) { ui.onayPopup.querySelector('#onay-mesaji').innerHTML = mesaj; ui.onayPopup.classList.add('show'); const devamBtn = ui.onayPopup.querySelector('#onay-devam-btn'); const iptalBtn = ui.onayPopup.querySelector('#onay-iptal-btn'); const devamListener = () => { ui.onayPopup.classList.remove('show'); callback(); cleanUpListeners(); }; const iptalListener = () => { ui.onayPopup.classList.remove('show'); cleanUpListeners(); }; const cleanUpListeners = () => { devamBtn.removeEventListener('click', devamListener); iptalBtn.removeEventListener('click', iptalListener); }; devamBtn.addEventListener('click', devamListener); iptalBtn.addEventListener('click', iptalListener); }
        function showBilgiPopup(mesaj, callback) { ui.bilgiPopup.querySelector('#bilgi-mesaji').innerHTML = mesaj; ui.bilgiPopup.classList.add('show'); const kapatBtn = ui.bilgiPopup.querySelector('#bilgi-kapat-btn'); kapatBtn.onclick = () => { ui.bilgiPopup.classList.remove('show'); if(callback) callback(); kapatBtn.onclick = null; }; }

    </script>
</body>
</html>








